import{w as h,r as n,j as e}from"./index-BNEvq925.js";const y="_page_fp1u5_1",x="_overlay_fp1u5_34",j="_content_fp1u5_58",B="_label_fp1u5_68",b="_title_fp1u5_75",N="_subtitle_fp1u5_82",E="_recordPlayer_fp1u5_88",L="_recordButton_fp1u5_109",P="_recordDisc_fp1u5_147",S="_recordGrooves_fp1u5_174",A="_recordLabel_fp1u5_183",H="_recordBadge_fp1u5_209",$="_recordBadgeActive_fp1u5_227",w="_recordButtonSpinning_fp1u5_233",D="_tonearm_fp1u5_245",G="_tonearmActive_fp1u5_272",R="_endingHeart_fp1u5_276",r={page:y,overlay:x,content:j,label:B,title:b,subtitle:N,recordPlayer:E,recordButton:L,recordDisc:P,recordGrooves:S,recordLabel:A,recordBadge:H,recordBadgeActive:$,recordButtonSpinning:w,tonearm:D,tonearmActive:G,endingHeart:R},M=({songs:p,onAccentChange:o})=>{const s=p[0],f=s?.image??h("photos/eve-ghost-avenue.jpg"),[a,c]=n.useState(!1),[m,l]=n.useState(!1),d=n.useRef(null),v=n.useMemo(()=>({"--anthem-color":s?.color??"#f8bcd8"}),[s]);n.useEffect(()=>{if(s)return o(s.color),()=>{o(null)}},[s,o]),n.useEffect(()=>{const t=d.current;if(!t)return;const i=()=>{c(!0),l(!1)},u=()=>{c(!1)},_=()=>{c(!1),l(!0)};return t.addEventListener("play",i),t.addEventListener("pause",u),t.addEventListener("ended",_),()=>{t.removeEventListener("play",i),t.removeEventListener("pause",u),t.removeEventListener("ended",_)}},[]);const g=()=>{const t=d.current;t&&(a?t.pause():t.play().catch(()=>{}))};return s?e.jsxs("div",{className:r.page,style:v,"data-playing":a,children:[e.jsx("div",{className:r.overlay,"aria-hidden":"true"}),e.jsxs("div",{className:r.content,children:[e.jsx("p",{className:r.label,children:"Пісня, що нагадує мені тебе"}),e.jsx("h2",{className:r.title,children:s.title}),e.jsx("p",{className:r.subtitle,children:s.memory}),e.jsxs("div",{className:r.recordPlayer,children:[e.jsx("span",{className:`${r.tonearm} ${a?r.tonearmActive:""}`,"aria-hidden":"true"}),e.jsxs("button",{type:"button",className:`${r.recordButton} ${a?r.recordButtonSpinning:""}`,onClick:g,"aria-pressed":a,"aria-label":a?"Пауза":"Відтворити",children:[e.jsxs("span",{className:r.recordDisc,children:[e.jsx("span",{className:r.recordGrooves,"aria-hidden":"true"}),e.jsx("span",{className:r.recordLabel,children:e.jsx("img",{src:f,alt:"Обкладинка треку",loading:"lazy",decoding:"async"})})]}),e.jsx("span",{className:`${r.recordBadge} ${a?r.recordBadgeActive:""}`,children:a?"⏸":"▶"})]})]}),e.jsx("audio",{ref:d,src:s.audio,preload:"auto",children:"Ваш браузер не підтримує відтворення аудіо."}),m&&e.jsx("div",{className:r.endingHeart,"aria-live":"polite",children:e.jsx("span",{})})]})]}):null};export{M as default};
